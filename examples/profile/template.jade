template(ns="profile")
  style.
    @import url("/assets/-/fontello/css/fontello.css");
    :host {display: block; padding: 20px; background: #fff; min-height: 90px; margin-bottom: 10px;}
    header {font-size: 30px;margin-bottom: 20px;}
    .icon-location {font-size: 25px; color: #900;}
    img {float: right;border: 5px solid #f0f0f0; }
    i { width: 40px; display: inline-block; color: #333; text-align: center;margin-right: 10px;}
    i.icon-thumbs-up-alt {cursor: pointer;}
    header span span{padding-left: 5px;}
    header span span:first-child{padding-left: 0px;}
  div.wrap
    img(src="\#{image}")
    header 
      i.icon-user
      span.editable
        span \#{name.first}
        span \#{name.middle}
        span \#{name.last}
    div
      i.icon-calendar
      span \#{dob}
    div
      i.icon-location
      span \#{location}
    div(visible)
      i.icon-thumbs-up-alt
      span.likes \#{likes}
  script.

    $(shadow.content)
    .on('click','.icon-thumbs-up-alt',function (){
      //- debugger
      shadow = Root
      var likes = $('.likes', shadow.content)
      var path = likes.attr('path')
      var num = Prop(path, JOM.Collection)+1
      Prop(path, JOM.Collection, num)
      
    })
    .on('click','img',function (){
      shadow = Root
      var img = $('img', shadow.content)
      var value = "http://hhhhold.com/90x90?"+ new Date().getTime()
      var path = img.attr('path')
      Prop(path, JOM.Collection, value)
    })
    
    $('.editable', shadow.content).each(function(i, el){
      
      $(el).children('span').each(function (i, span){
        new_span = $('<span/>',{contenteditable: true, text: $(span).text() })
        $(span).text("").append(new_span)
      })
    })
    .on('blur', function(){
      debugger
      var path = $(this).attr('path')
      var val = $(this).val()
      
      Prop(path, JOM.Collection, val)
    })
